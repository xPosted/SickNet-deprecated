<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

<head>
    <base href="http://localhost:8080/Sors_JSFDeveloping-1.0-SNAPSHOT/"/>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>INSPINIA | Empty Page</title>

    <link href="jsf/inspinia/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="jsf/inspinia/font-awesome/css/font-awesome.css" rel="stylesheet"/>

    <link href="jsf/inspinia/css/animate.css" rel="stylesheet"/>
    <link href="jsf/inspinia/css/style.css" rel="stylesheet"/>
    <style type="text/css">
        .mainLogo_signed {
            position: relative;
            left: 925px;
            width: 110px;
            padding: 0;
            margin: 0;
            z-index: 9;
        }
        .nodeTable {
            width: 100%;
        }

        .closeIcon {
            visibility: hidden;
            border-radius: 50;
            border: 0;
        }

        table.nodeTable td {
            text-align: center;
            padding: 10px;
            border-bottom: 1px solid black;
        }

        table.nodeTable th {
            text-align: center;
            padding: 10px;
        }
    </style>

</head>

<body class="">

<div id="wrapper">

    <ui:include src="LeftNavbar.xhtml"/>

    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top  " role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                    <form role="search" class="navbar-form-custom" action="search_results.html">
                        <div class="form-group">
                            <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search"/>
                        </div>
                    </form>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message">Welcome to INSPINIA+ Admin Theme.</span>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                            <i class="fa fa-envelope"></i>  <span class="label label-warning">16</span>
                        </a>
                        <ul class="dropdown-menu dropdown-messages">
                            <li>
                                <div class="dropdown-messages-box">
                                    <a href="profile.html" class="pull-left">
                                        <img alt="image" class="img-circle" src="img/a7.jpg"/>
                                    </a>
                                    <div class="media-body">
                                        <small class="pull-right">46h ago</small>
                                        <strong>Mike Loreipsum</strong> started following <strong>Monica Smith</strong>. <br/>
                                        <small class="text-muted">3 days ago at 7:58 pm - 10.06.2014</small>
                                    </div>
                                </div>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <div class="dropdown-messages-box">
                                    <a href="profile.html" class="pull-left">
                                        <img alt="image" class="img-circle" src="img/a4.jpg"/>
                                    </a>
                                    <div class="media-body ">
                                        <small class="pull-right text-navy">5h ago</small>
                                        <strong>Chris Johnatan Overtunk</strong> started following <strong>Monica Smith</strong>. <br/>
                                        <small class="text-muted">Yesterday 1:21 pm - 11.06.2014</small>
                                    </div>
                                </div>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <div class="dropdown-messages-box">
                                    <a href="profile.html" class="pull-left">
                                        <img alt="image" class="img-circle" src="img/profile.jpg"/>
                                    </a>
                                    <div class="media-body ">
                                        <small class="pull-right">23h ago</small>
                                        <strong>Monica Smith</strong> love <strong>Kim Smith</strong>. <br/>
                                        <small class="text-muted">2 days ago at 2:30 am - 11.06.2014</small>
                                    </div>
                                </div>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <div class="text-center link-block">
                                    <a href="mailbox.html">
                                        <i class="fa fa-envelope"></i> <strong>Read All Messages</strong>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                            <i class="fa fa-bell"></i>  <span class="label label-primary">8</span>
                        </a>
                        <ul class="dropdown-menu dropdown-alerts">
                            <li>
                                <a href="mailbox.html">
                                    <div>
                                        <i class="fa fa-envelope fa-fw"></i> You have 16 messages
                                        <span class="pull-right text-muted small">4 minutes ago</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="profile.html">
                                    <div>
                                        <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                        <span class="pull-right text-muted small">12 minutes ago</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="grid_options.html">
                                    <div>
                                        <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                        <span class="pull-right text-muted small">4 minutes ago</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <div class="text-center link-block">
                                    <a href="notifications.html">
                                        <strong>See All Alerts</strong>
                                        <i class="fa fa-angle-right"></i>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>


                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> Log out
                        </a>
                    </li>
                </ul>

            </nav>
        </div>
        <div class="row wrapper border-bottom white-bg page-heading">
            <div class="col-sm-4">
                <h2>This is main title</h2>
                <ol class="breadcrumb">
                    <li>
                        <a href="index.html">This is</a>
                    </li>
                    <li class="active">
                        <strong>Breadcrumb</strong>
                    </li>
                </ol>
            </div>
            <div class="col-sm-8">
                <div class="title-action">
                    <a href="" class="btn btn-primary">This is action area</a>
                </div>
            </div>
        </div>

        <div class="wrapper wrapper-content">

            <!--


            inserted content
            -->
            <div class="col-md-10">
                <div style="width: 100%;">
                    <table id="mainTable" class="nodeTable table table-default">
                        <caption>Available nodeServerEndpoints</caption>
                        <thead>
                        <tr>
                            <th id="col1" onmouseleave="hideCloseIcon(event);"
                                onmouseenter="showCloseIcon(event);">
                                <div  style="text-align: right;">
                                    <button id="col1_closeIcon" onclick="closeCol(event);" type="button"
                                            class="closeIcon btn-default">
									<span id="col1_closeIcon_glyph" style="display: block;"
                                          class="glyphicon glyphicon-remove-circle"></span>
                                    </button>
                                </div>Node name</th>
                            <th id="col3" onmouseleave="hideCloseIcon(event);"
                                onmouseenter="showCloseIcon(event);">
                                <div style="text-align: right;">
                                    <button id="col3_closeIcon"  onclick="closeCol(event);" type="button"
                                            class="closeIcon btn-default">
									<span id="col3_closeIcon_glyph" style="display: block;"
                                          class="glyphicon glyphicon-remove-circle"></span>
                                    </button>
                                </div>Status</th>
                            <th id="col4" onmouseleave="hideCloseIcon(event);"
                                onmouseenter="showCloseIcon(event);">
                                <div style="text-align: right;">
                                    <button id="col4_closeIcon"  onclick="closeCol(event);" type="button"
                                            class="closeIcon btn-default">
									<span id="col4_closeIcon_glyph" style="display: block;"
                                          class="glyphicon glyphicon-remove-circle"></span>
                                    </button>
                                </div>Associated date</th>

                            <th id="col7" onmouseleave="hideCloseIcon(event);"
                                onmouseenter="showCloseIcon(event);">
                                <div style="text-align: right;">
                                    <button id="col7_closeIcon"  onclick="closeCol(event);" type="button"
                                            class="closeIcon btn-default">
									<span id="col7_closeIcon_glyph" style="display: block;"
                                          class="glyphicon glyphicon-remove-circle"></span>
                                    </button>
                                </div>CPU count</th>
                            <th id="col8" onmouseleave="hideCloseIcon(event);"
                                onmouseenter="showCloseIcon(event);">
                                <div style="text-align: right;">
                                    <button id="col8_closeIcon"  onclick="closeCol(event);" type="button"
                                            class="closeIcon btn-default">
									<span id="col8_closeIcon_glyph" style="display: block;"
                                          class="glyphicon glyphicon-remove-circle"></span>
                                    </button>
                                </div>Mem. count</th>
                            <th id="col9" onmouseleave="hideCloseIcon(event);"
                                onmouseenter="showCloseIcon(event);">
                                <div style="text-align: right;">
                                    <button id="col9_closeIcon"  onclick="closeCol(event);" type="button"
                                            class="closeIcon btn-default">
									<span id="col9_closeIcon_glyph" style="display: block;"
                                          class="glyphicon glyphicon-remove-circle"></span>
                                    </button>
                                </div>Live capture</th>
                            <th id="col10" onmouseleave="hideCloseIcon(event);"
                                onmouseenter="showCloseIcon(event);">
                                <div style="text-align: right;">
                                    <button id="col10_closeIcon"  onclick="closeCol(event);" type="button"
                                            class="closeIcon btn-default">
									<span id="col10_closeIcon_glyph" style="display: block;"
                                          class="glyphicon glyphicon-remove-circle"></span>
                                    </button>
                                </div>Avalilable space</th>
                        </tr>
                        </thead>
                        <tbody>
                        <ui:repeat value="#{nodesBean.infoBeans}" var="infoBean">
                        <tr onmouseenter="mouseEnter(event);" onmouseleave="mouseLeave(event);">
                            <div >
                                <td class="col1_data"><a href="app/jsf/inspinia/content/NodeInfo.xhtml?nodeId=#{infoBean.unid}">#{infoBean.nodeName}</a></td>
                                <td class="col3_data">#{infoBean.status}</td>

                                <td class="col4_data">#{infoBean.connectedDate}</td>
                                <td class="col7_data">#{infoBean.procCount}</td>
                                <td class="col8_data">#{infoBean.maxMem}</td>
                                <td class="col9_data">Delete this fld</td>
                                <td class="col10_data">#{infoBean.availableMem}</td>
                                <td style="display: none;">#{infoBean.owner}</td>
                                <td style="display: none;">#{infoBean.osArch}</td>
                                <td style="display: none;">#{infoBean.currentDumpCount}</td>
                            </div>


                        </tr>
                        </ui:repeat>

                        </tbody>

                    </table>
                </div>
            </div>


            <div class="panel panel-default col-lg-2">
                <div class="panel-heading" style="text-align: center;" id="nodeName"> [Node name]</div>
                <div class="panel-body">
                    <table style="width: 180px;" class="table table-default">
                        <tr>
                            <th> Owner:</th>
                            <td id="nodeOwner"></td>
                        </tr>
                        <tr>
                            <th>Arch:</th>
                            <td id="nodeArch"></td>
                        </tr>
                        <tr>
                            <th>Loaded cnt:</th>
                            <td id="nodeLoaded"></td>
                        </tr>
                    </table>

                    <button data-toggle="modal" data-target="#uploadModal" class="btn btn-default">Upload</button>
                </div>
            </div>

            <!--



          -->


            <div class="middle-box text-center animated fadeInRightBig">
                <h3 class="font-bold">This is page content</h3>
                <div class="error-desc">
                    You can create here any grid layout you want. And any variation layout you imagine:) Check out
                    main dashboard and other site. It use many different layout.
                    <br/><a href="index.html" class="btn btn-primary m-t">Dashboard</a>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="pull-right">
                10GB of <strong>250GB</strong> Free.
            </div>
            <div>
                <strong>Copyright</strong> Example Company 2014-2015
            </div>
        </div>

    </div>
</div>

<!-- Mainly scripts -->
<script src="jsf/inspinia/js/jquery-2.1.1.js"></script>
<script src="jsf/inspinia/js/bootstrap.min.js"></script>
<script src="jsf/inspinia/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="jsf/inspinia/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="jsf/inspinia/js/inspinia.js"></script>
<script src="jsf/inspinia/js/plugins/pace/pace.min.js"></script>
<script type="text/javascript">
    <![CDATA[
    $(document).ready(function() {
        init();
    });

    function mouseEnter(event) {

        event.target.style.background = "#d9e1f3";


    }
    function mouseLeave(event) {

        event.target.style.background = "";

    }

    function init() {
        $("#pathToFile").change(fileSelect);
        var mainTable = document.getElementById("mainTable");
        var rows = mainTable.rows;
        for (i=0;i < rows.length; i++) {
            rows[i].onclick=function(event) {
                onRowClick(event);
            };
        }
    }
    function onRowClick(event) {


        var row = event.target.parentNode;
        var cells = row.cells;
        var a = cells[0].getElementsByTagName("a");
        var owner = cells[7].innerHTML;
        var arch = cells[8].innerHTML;
        var loaded = cells[9].innerHTML;
        document.getElementById("nodeName").innerHTML=a[0].innerHTML;
        document.getElementById("nodeOwner").innerHTML=owner;
        document.getElementById("nodeArch").innerHTML=arch;
        document.getElementById("nodeLoaded").innerHTML=loaded;
        document.getElementById("uploadNodeName").innerHTML=a[0].innerHTML;

    }

    function showCloseIcon(event) {
        var icon = document.getElementById(event.target.id + "_closeIcon");
        icon.style.visibility = "visible";

    }

    function hideCloseIcon(event) {
        var icon = document.getElementById(event.target.id + "_closeIcon");
        icon.style.visibility = "hidden";

    }

    function closeCol(event) {

        var icon_id = event.target.id;
        var mas = icon_id.split("_");

        var thid = mas[0];
        var th = document.getElementById(thid);
        var elems = document.getElementsByClassName(thid+"_data");

        th.style.display="none";
        for (var i=0;i<elems.length;i++) {
            elems[i].style.display="none";
        }




    }
    function fileSelect() {
        var selectedFile = document.getElementById("pathToFile");
        var selFileNameView = document.getElementById("selFileNameView");
        selFileNameView.innerHTML=selectedFile.value;
        document.getElementById("uploadBtn").className="btn btn-primary";

    }

    function uploadComplete(evt) {
        /* This event is raised when the server send back a response */
        alert(evt.target.responseText);
    }

    function uploadFailed(evt) {
        alert("There was an error attempting to upload the file.");
    }

    function uploadCanceled(evt) {
        alert("The upload has been canceled by the user or the browser dropped the connection.");
    }


    function uploadProgress(evt) {
        var one = parseInt(evt.total / 100);
        var status = parseInt(evt.loaded / one);
        document.getElementById("uploadProgress").style.width=status+'%';
        document.getElementById("uploadProgress").innerHTML=status+'%';
        //   alert("Progress");
    }


    function upload() {
//		window.alert("upload");
//		document.forms["uploadForm"].submit();

        var nodeName = document.getElementById("nodeName").innerHTML;
        var owner = document.getElementById("owner").innerHTML;
        document.getElementById("uploadProgress").style.width='0%';
        document.getElementById("uploadProgress").innerHTML='0%';
        var fd = new FormData();
        fd.append("pathToFile", document.getElementById('pathToFile').files[0]);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);
        xhr.open("POST", "Upload?nodeName="+owner+"@"+nodeName);
        xhr.send(fd);


    }
    ]]>
</script>



</body>

</html>
